<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.roddypy.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"./public/search.xml"};
  </script>

  <meta name="description" content="认认真真做事，踏踏实实做人">
<meta property="og:type" content="website">
<meta property="og:title" content="普拉多VX">
<meta property="og:url" content="http://www.roddypy.com/index.html">
<meta property="og:site_name" content="普拉多VX">
<meta property="og:description" content="认认真真做事，踏踏实实做人">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Roddy">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.roddypy.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>普拉多VX</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">普拉多VX</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">人生一路，不问来时，不知归期</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/12/02/Ubuntu-18-04-%E5%AE%89%E8%A3%85-golang-1-14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/02/Ubuntu-18-04-%E5%AE%89%E8%A3%85-golang-1-14/" class="post-title-link" itemprop="url">Ubuntu 18.04 安装 golang 1.14</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-12-02 10:41:15 / 修改时间：10:51:20" itemprop="dateCreated datePublished" datetime="2020-12-02T10:41:15+08:00">2020-12-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a>
                </span>
            </span>

          
            <span id="/2020/12/02/Ubuntu-18-04-%E5%AE%89%E8%A3%85-golang-1-14/" class="post-meta-item leancloud_visitors" data-flag-title="Ubuntu 18.04 安装 golang 1.14" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/12/02/Ubuntu-18-04-%E5%AE%89%E8%A3%85-golang-1-14/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/12/02/Ubuntu-18-04-%E5%AE%89%E8%A3%85-golang-1-14/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>使用apt-get 默认仓库安装的版本是1.10，要不就添加仓库安装，要不就下载源码安装。我采用源码安装。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:~<span class="comment"># wget -c https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz -O - | sudo tar -xz -C /usr/local #下载并解压到/usr/local/目录下</span></span><br><span class="line">--2020-12-02 10:38:36--  https://dl.google.com/go/go1.14.2.linux-amd64.tar.gz</span><br><span class="line">Resolving dl.google.com (dl.google.com)... 203.208.43.65</span><br><span class="line">Connecting to dl.google.com (dl.google.com)|203.208.43.65|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 123658438 (118M) [application/octet-stream]</span><br><span class="line">Saving to: ‘STDOUT’</span><br><span class="line"></span><br><span class="line">-                                         100%[==================================================================================&gt;] 117.93M  11.4MB/s    <span class="keyword">in</span> 9.3s    </span><br><span class="line"></span><br><span class="line">2020-12-02 10:38:46 (12.6 MB/s) - written to stdout [123658438/123658438]</span><br></pre></td></tr></table></figure>
<p>添加环境PATH</p>
<figure class="highlight plain"><figcaption><span>PATH</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line">root@monitor:~# </span><br><span class="line">root@monitor:~# vim &#x2F;etc&#x2F;profile</span><br><span class="line">root@monitor:~# source  &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>

<p>检查golang版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:~<span class="comment"># go version</span></span><br><span class="line">go version go1.14.2 linux/amd64</span><br><span class="line">root@monitor:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<h3 id="编写测试程序"><a href="#编写测试程序" class="headerlink" title="编写测试程序"></a>编写测试程序</h3><p>test.go</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">     fmt.Println(<span class="string">"hello world"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译并执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@monitor:~<span class="comment"># go build test.go </span></span><br><span class="line">root@monitor:~<span class="comment"># ./test </span></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/12/01/Mysql-5-7-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AD%97%E7%AC%A6%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/01/Mysql-5-7-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AD%97%E7%AC%A6%E9%9B%86/" class="post-title-link" itemprop="url">Mysql 5.7 设置默认字符集</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-12-01 16:28:05 / 修改时间：16:39:57" itemprop="dateCreated datePublished" datetime="2020-12-01T16:28:05+08:00">2020-12-01</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mysql/" itemprop="url" rel="index"><span itemprop="name">Mysql</span></a>
                </span>
            </span>

          
            <span id="/2020/12/01/Mysql-5-7-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AD%97%E7%AC%A6%E9%9B%86/" class="post-meta-item leancloud_visitors" data-flag-title="Mysql 5.7 设置默认字符集" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/12/01/Mysql-5-7-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AD%97%E7%AC%A6%E9%9B%86/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/12/01/Mysql-5-7-%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%AD%97%E7%AC%A6%E9%9B%86/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>设置mysql字符集 for Ubuntu 18.04 </p>
<h3 id="设置方法"><a href="#设置方法" class="headerlink" title="设置方法"></a>设置方法</h3><p>修改 /etc/mysql/mysql.conf.d/mysqld.cnf</p>
<p>添加：character-set-server=utf8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># * Basic Settings</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">user            = mysql</span><br><span class="line">pid-file        = /var/run/mysqld/mysqld.pid</span><br><span class="line">socket          = /var/run/mysqld/mysqld.sock</span><br><span class="line">port            = 3306</span><br><span class="line">basedir         = /usr</span><br><span class="line">datadir         = /var/lib/mysql</span><br><span class="line">tmpdir          = /tmp</span><br><span class="line">lc-messages-dir = /usr/share/mysql</span><br><span class="line">character-set-server=utf8  //添加</span><br><span class="line">skip-external-locking</span><br></pre></td></tr></table></figure>

<p>修改 /etc/mysql/conf.d/mysql.cnf</p>
<p>添加：default-character-set=utf8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line">~</span><br></pre></td></tr></table></figure>

<h3 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">systemctl</span>  <span class="selector-tag">restart</span> <span class="selector-tag">mysql</span><span class="selector-class">.service</span></span><br></pre></td></tr></table></figure>

<p>检查发现以下字符集已经修改成功</p>
<p>Server characterset:    utf8<br>Db     characterset:    utf8<br>Client characterset:    utf8<br>Conn.  characterset:    utf8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@localhost:<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.7.32-0ubuntu0.18.04.1 (Ubuntu)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; \s</span><br><span class="line">--------------</span><br><span class="line">mysql  Ver 14.14 Distrib 5.7.32, <span class="keyword">for</span> Linux (x86_64) using  EditLine wrapper</span><br><span class="line"></span><br><span class="line">Connection id:          2</span><br><span class="line">Current database:</span><br><span class="line">Current user:           root@localhost</span><br><span class="line">SSL:                    Not <span class="keyword">in</span> use</span><br><span class="line">Current pager:          stdout</span><br><span class="line">Using outfile:          <span class="string">''</span></span><br><span class="line">Using delimiter:        ;</span><br><span class="line">Server version:         5.7.32-0ubuntu0.18.04.1 (Ubuntu)</span><br><span class="line">Protocol version:       10</span><br><span class="line">Connection:             Localhost via UNIX socket</span><br><span class="line">Server characterset:    utf8      </span><br><span class="line">Db     characterset:    utf8</span><br><span class="line">Client characterset:    utf8</span><br><span class="line">Conn.  characterset:    utf8</span><br><span class="line">UNIX socket:            /var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:                 21 sec</span><br><span class="line"></span><br><span class="line">Threads: 1  Questions: 5  Slow queries: 0  Opens: 105  Flush tables: 1  Open tables: 98  Queries per second avg: 0.238</span><br><span class="line">--------------</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/11/21/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%BA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/21/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%BA%8C/" class="post-title-link" itemprop="url">Golang Windows GUI开发实战之lxn/Walk (二)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-21 09:16:35 / 修改时间：10:39:54" itemprop="dateCreated datePublished" datetime="2020-11-21T09:16:35+08:00">2020-11-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a>
                </span>
            </span>

          
            <span id="/2020/11/21/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%BA%8C/" class="post-meta-item leancloud_visitors" data-flag-title="Golang Windows GUI开发实战之lxn/Walk (二)" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/21/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%BA%8C/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/21/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%BA%8C/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="主窗体"><a href="#主窗体" class="headerlink" title="主窗体"></a>主窗体</h2><p>使用MainWindow结构体定义主窗体</p>
<h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">MainWindow&#123;</span><br><span class="line">		Title:   <span class="string">"GUI程序"</span>,</span><br><span class="line">		MinSize: Size&#123;<span class="number">600</span>, <span class="number">400</span>&#125;,</span><br><span class="line">		Layout:  VBox&#123;&#125;,</span><br><span class="line">		Children: []Widget&#123;</span><br><span class="line">			HSplitter&#123;</span><br><span class="line">				Children: []Widget&#123;</span><br><span class="line">					TextEdit&#123;AssignTo: &amp;inTE&#125;,</span><br><span class="line">					TextEdit&#123;AssignTo: &amp;outTE, ReadOnly: <span class="literal">true</span>&#125;,</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">			PushButton&#123;</span><br><span class="line">				Text: <span class="string">"转换"</span>,</span><br><span class="line">				OnClicked: <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">					outTE.SetText(strings.ToUpper(inTE.Text()))</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;.Run()</span><br></pre></td></tr></table></figure>

<h3 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h3><p>以下我列出目前阶段我常用的属性设置，后面待补充，或者自己参考源码。</p>
<ul>
<li>Title:   程序头部标题</li>
<li>MinSize: 定义最小窗体（默认窗体可以拖动）如设置即：默认窗体可缩小的最小比例 分别为宽度,高度像素</li>
<li>MaxSize: 定义最大窗体（默认窗体可以拖动）如设置即：默认窗体可缩大的最大比例 分别为宽度,高度像素</li>
<li>Layout:  全局布局类型</li>
<li>Children: 控件集</li>
<li>MenuItems: 程序菜单栏</li>
<li>TooBar: 工具栏</li>
<li>Font:   窗体文字样式，使用Font:Font{} 结构体方式声明。</li>
<li>Icon:   设置Icon图标路径 使用Icon: “img/xx.ico”</li>
</ul>
<p>参考-字体样例</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">font := Font&#123;</span><br><span class="line">	Family: <span class="string">"Times New Roman"</span>, <span class="comment">//字体</span></span><br><span class="line">	PointSize: <span class="number">10</span>,  <span class="comment">//大小</span></span><br><span class="line">	Bold: <span class="literal">true</span>, <span class="comment">//是否加粗</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考-菜单定义</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义菜单</span></span><br><span class="line">MenuItems: []MenuItem&#123;</span><br><span class="line"></span><br><span class="line">	Menu&#123;</span><br><span class="line">		Text: <span class="string">"&amp;关于"</span>,</span><br><span class="line">		Items: []MenuItem&#123;</span><br><span class="line">			Action&#123;</span><br><span class="line">				Text: <span class="string">"版本"</span>,</span><br><span class="line">				OnTriggered: <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">					walk.MsgBox(mw, <span class="string">"版本"</span>, versionStr, walk.MsgBoxIconInformation)</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="comment">//...</span></span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>主窗体布局可以使用两种布局方式，分别为VBox和HBox。具体的布局根据自己程序的设计自己选择。</p>
<ul>
<li>VBox(垂直布局)</li>
</ul>
<img src="/img/1605924215030.jpg">

<ul>
<li>HBox(水平布局)</li>
</ul>
<img src="/img/1605924194579.jpg">



<h2 id="菜单栏"><a href="#菜单栏" class="headerlink" title="菜单栏"></a>菜单栏</h2><p>菜单定义使用Menu属性</p>
<ul>
<li>Text: 文字定义</li>
<li>OnTriggered: 点击事件</li>
</ul>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义菜单</span></span><br><span class="line">MenuItems: []MenuItem&#123;</span><br><span class="line">	Menu&#123;</span><br><span class="line">		Text: <span class="string">"&amp;系统"</span>, </span><br><span class="line">		Items: []MenuItem&#123;</span><br><span class="line">			Action&#123;</span><br><span class="line">				Text:        <span class="string">"退出"</span>,</span><br><span class="line">				OnTriggered: <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123; mw.Close() &#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line"></span><br><span class="line">	Menu&#123;</span><br><span class="line">		Text: <span class="string">"&amp;关于"</span>,</span><br><span class="line">		Items: []MenuItem&#123;</span><br><span class="line">			Action&#123;</span><br><span class="line">				Text: <span class="string">"版本"</span>,</span><br><span class="line">				OnTriggered: <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">					walk.MsgBox(mw, <span class="string">"版本"</span>, versionStr, walk.MsgBoxIconInformation) <span class="comment">//弹出消息框，类型为info</span></span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">			Action&#123;</span><br><span class="line">				Text: <span class="string">"联系我们"</span>,</span><br><span class="line">				OnTriggered: <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">					walk.MsgBox(mw, <span class="string">"联系我们"</span>, <span class="string">"开发者:蓝谷骑兵\nQQ:923401910"</span>, walk.MsgBoxIconInformation)</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>


<h2 id="工具栏"><a href="#工具栏" class="headerlink" title="工具栏"></a>工具栏</h2><p>ToolBar声明，源码中定义了4中ToolBar样式，分别为以下几种</p>
<ul>
<li>ToolBarButtonImageOnly  //单一图片样式</li>
<li>ToolBarButtonTextOnly //单一文字样式</li>
<li>ToolBarButtonImageBeforeText //图片在文字之前</li>
<li>ToolBarButtonImageAboveText //图片在文字之上</li>
</ul>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">TooBar: TooBar&#123;</span><br><span class="line">	ButtonStyle: 样式,</span><br><span class="line">	Items:[]MenuItem&#123;</span><br><span class="line">		ActionRef&#123;Action&#125;,</span><br><span class="line">		Menu&#123;</span><br><span class="line">			<span class="comment">//工具栏一</span></span><br><span class="line">		&#125;,</span><br><span class="line">		Separator&#123;&#125;, <span class="comment">// 分割线</span></span><br><span class="line">		Menu&#123;</span><br><span class="line">			<span class="comment">//工具栏二</span></span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>参考样图</p>
<img src="/img/WechatIMG40.png">



<h2 id="源码样例"><a href="#源码样例" class="headerlink" title="源码样例"></a>源码样例</h2><ul>
<li><a href="https://github.com/lxn/walk/tree/master/examples" target="_blank" rel="noopener">https://github.com/lxn/walk/tree/master/examples</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/11/18/golang-sqlite3-exec-gcc-executable-file-not-found/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/18/golang-sqlite3-exec-gcc-executable-file-not-found/" class="post-title-link" itemprop="url">golang sqlite3 exec gcc executable file not found</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-18 21:07:55 / 修改时间：21:16:20" itemprop="dateCreated datePublished" datetime="2020-11-18T21:07:55+08:00">2020-11-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a>
                </span>
            </span>

          
            <span id="/2020/11/18/golang-sqlite3-exec-gcc-executable-file-not-found/" class="post-meta-item leancloud_visitors" data-flag-title="golang sqlite3 exec gcc executable file not found" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/18/golang-sqlite3-exec-gcc-executable-file-not-found/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/18/golang-sqlite3-exec-gcc-executable-file-not-found/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="提示没有gcc问题"><a href="#提示没有gcc问题" class="headerlink" title="提示没有gcc问题"></a>提示没有gcc问题</h2><p>windows 10</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI\go\src\ThorGui&gt;go get</span><br><span class="line"><span class="comment"># github.com/mattn/go-sqlite3</span></span><br><span class="line"><span class="built_in">exec</span>: <span class="string">"gcc"</span>: executable file not found <span class="keyword">in</span> %PATH%</span><br></pre></td></tr></table></figure>


<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>1.下载gcc并安装 <a href="https://jmeubank.github.io/tdm-gcc/" target="_blank" rel="noopener">https://jmeubank.github.io/tdm-gcc/</a></p>
<img src="/img/WechatIMG15.png">

<img src="/img/WechatIMG16.png">

<img src="/img/WechatIMG17.png">

<p>注意勾选，默认即可<br><img src="/img/WechatIMG18.png"></p>
<img src="/img/WechatIMG19.png">

<p>完成安装<br><img src="/img/WechatIMG20.png"></p>
<p>2.验证是否安装成功</p>
<p>gcc -v</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI&gt;gcc -v</span><br><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=gcc</span><br><span class="line">COLLECT_LTO_WRAPPER=C:/TDM-GCC-64/bin/../libexec/gcc/x86_64-w64-mingw32/9.2.0/lto-wrapper.exe</span><br><span class="line">Target: x86_64-w64-mingw32</span><br><span class="line">Configured with: ../../../src/gcc-git-9.2.0/configure --build=x86_64-w64-mingw32 --<span class="built_in">enable</span>-targets=all --<span class="built_in">enable</span>-languages=ada,c,c++,fortran,lto,objc,obj-c++ --<span class="built_in">enable</span>-libgomp --<span class="built_in">enable</span>-lto --<span class="built_in">enable</span>-graphite --<span class="built_in">enable</span>-cxx-flags=-DWINPTHREAD_STATIC --<span class="built_in">disable</span>-build-with-cxx --<span class="built_in">disable</span>-build-poststage1-with-cxx --<span class="built_in">enable</span>-libstdcxx-debug --<span class="built_in">enable</span>-threads=posix --<span class="built_in">enable</span>-version-specific-runtime-libs --<span class="built_in">enable</span>-fully-dynamic-string --<span class="built_in">enable</span>-libstdcxx-threads --<span class="built_in">enable</span>-libstdcxx-time --with-gnu-ld --<span class="built_in">disable</span>-werror --<span class="built_in">disable</span>-nls --<span class="built_in">disable</span>-win32-registry --<span class="built_in">enable</span>-large-address-aware --<span class="built_in">disable</span>-rpath --<span class="built_in">disable</span>-symvers --prefix=/mingw64tdm --with-local-prefix=/mingw64tdm --with-pkgversion=tdm64-1 --with-bugurl=http://tdm-gcc.tdragon.net/bugs</span><br><span class="line">Thread model: posix</span><br><span class="line">gcc version 9.2.0 (tdm64-1)</span><br><span class="line"></span><br><span class="line">C:\Users\UI&gt;</span><br></pre></td></tr></table></figure>

<p>3.关闭goland工程，重新打开</p>
<p>再次使用go get 下载安装sqlite3</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://www.cnblogs.com/grimm/p/7448414.html" target="_blank" rel="noopener">https://www.cnblogs.com/grimm/p/7448414.html</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/11/13/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/13/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%B8%80/" class="post-title-link" itemprop="url">Golang Windows GUI开发实战之lxn/Walk (一)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-13 10:42:18" itemprop="dateCreated datePublished" datetime="2020-11-13T10:42:18+08:00">2020-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-21 09:00:04" itemprop="dateModified" datetime="2020-11-21T09:00:04+08:00">2020-11-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a>
                </span>
            </span>

          
            <span id="/2020/11/13/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%B8%80/" class="post-meta-item leancloud_visitors" data-flag-title="Golang Windows GUI开发实战之lxn/Walk (一)" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/13/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%B8%80/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/13/Golang-Windows-GUI%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%E4%B9%8Blxn-Walk-%E4%B8%80/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>本系列文档记录下最近研究golang 开发windows gui的一些技术要点和操作教程。</p>
<h2 id="walk介绍"><a href="#walk介绍" class="headerlink" title="walk介绍"></a>walk介绍</h2><p>今天因项目需要研究下GOLANG的GUI，发现了walk这个好东西，可以实现非常优美的界面程序。but只能在windows下开发</p>
<p>开发文档为：</p>
<ul>
<li><a href="http://godoc.org/github.com/lxn/walk" target="_blank" rel="noopener">http://godoc.org/github.com/lxn/walk</a><br>s<br>github地址：</li>
<li><a href="https://github.com/lxn/walk" target="_blank" rel="noopener">https://github.com/lxn/walk</a></li>
<li><a href="https://github.com/lxn/walk/tree/master/examples" target="_blank" rel="noopener">https://github.com/lxn/walk/tree/master/examples</a></li>
</ul>
<h2 id="walk下载"><a href="#walk下载" class="headerlink" title="walk下载"></a>walk下载</h2><p>如果下载失败,需要设置代理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI\go\src\ThorGui&gt;go get github.com/lxn/walk</span><br><span class="line">go get github.com/lxn/walk: module github.com/lxn/walk: Get <span class="string">"https://proxy.golang.org/github.com/lxn/walk/@v/list"</span>: dial tcp 216.58.200.49:443: connectex: A connection attempt failed because the connected party did not properly resp</span><br><span class="line">ond after a period of time, or established connection failed because connected host has failed to respond.</span><br><span class="line"></span><br><span class="line">C:\Users\UI\go\src\ThorGui&gt;go env -w GO111MODULE=on</span><br><span class="line"></span><br><span class="line">C:\Users\UI\go\src\ThorGui&gt;go env -w GOPROXY=https://goproxy.cn,direct</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI\go\src\ThorGui&gt;go get github.com/lxn/walk</span><br><span class="line">go: downloading github.com/lxn/walk v0.0.0-20201110160827-18ea5e372cdb</span><br><span class="line">go: github.com/lxn/walk upgrade =&gt; v0.0.0-20201110160827-18ea5e372cdb</span><br><span class="line">go: finding module <span class="keyword">for</span> package gopkg.in/Knetic/govaluate.v3</span><br><span class="line">go: finding module <span class="keyword">for</span> package golang.org/x/sys/windows</span><br><span class="line">go: finding module <span class="keyword">for</span> package github.com/lxn/win</span><br><span class="line">go: downloading gopkg.in/Knetic/govaluate.v3 v3.0.0</span><br><span class="line">go: downloading golang.org/x/sys v0.0.0-20201112073958-5cba982894dd</span><br><span class="line">go: downloading github.com/lxn/win v0.0.0-20201111105847-2a20daff6a55</span><br><span class="line">go: found github.com/lxn/win <span class="keyword">in</span> github.com/lxn/win v0.0.0-20201111105847-2a20daff6a55</span><br><span class="line">go: found golang.org/x/sys/windows <span class="keyword">in</span> golang.org/x/sys v0.0.0-20201112073958-5cba982894dd</span><br><span class="line">go: found gopkg.in/Knetic/govaluate.v3 <span class="keyword">in</span> gopkg.in/Knetic/govaluate.v3 v3.0.0</span><br><span class="line"></span><br><span class="line">C:\Users\UI\go\src\ThorGui&gt;</span><br></pre></td></tr></table></figure>


<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>第一个walk main.go程序</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"github.com/lxn/walk"</span></span><br><span class="line">	. <span class="string">"github.com/lxn/walk/declarative"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> inTE, outTE *walk.TextEdit <span class="comment">// 声明两个文本编辑控件</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//主窗口对象</span></span><br><span class="line">	MainWindow&#123;</span><br><span class="line">		Title:   <span class="string">"windows程序"</span>, <span class="comment">// 窗口标题设置</span></span><br><span class="line">		MinSize: Size&#123;<span class="number">600</span>, <span class="number">400</span>&#125;, <span class="comment">//窗体的大小</span></span><br><span class="line">		Layout:  VBox&#123;&#125;, <span class="comment">// 窗体的布局形式</span></span><br><span class="line">		<span class="comment">//定义vbox的所有控件</span></span><br><span class="line">		Children: []Widget&#123;  <span class="comment">//定义控件</span></span><br><span class="line">			HSplitter&#123;  <span class="comment">//水平分割控件</span></span><br><span class="line">				Children: []Widget&#123;  <span class="comment">//定义子控件</span></span><br><span class="line">					TextEdit&#123;AssignTo: &amp;inTE&#125;,</span><br><span class="line">					TextEdit&#123;AssignTo: &amp;outTE, ReadOnly: <span class="literal">true</span>&#125;,</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">			PushButton&#123;  <span class="comment">//按钮控件</span></span><br><span class="line">				Text: <span class="string">"确定"</span>,</span><br><span class="line">				OnClicked: <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">					outTE.SetText(strings.ToUpper(inTE.Text()))</span><br><span class="line">				&#125;,</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>创建manifest文件,文件名 thorgui.manifest</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">"urn:schemas-microsoft-com:asm.v1"</span> <span class="attr">manifestVersion</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">assemblyIdentity</span> <span class="attr">version</span>=<span class="string">"1.0.0.0"</span> <span class="attr">processorArchitecture</span>=<span class="string">"*"</span> <span class="attr">name</span>=<span class="string">"SomeFunkyNameHere"</span> <span class="attr">type</span>=<span class="string">"win32"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependentAssembly</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">assemblyIdentity</span> <span class="attr">type</span>=<span class="string">"win32"</span> <span class="attr">name</span>=<span class="string">"Microsoft.Windows.Common-Controls"</span> <span class="attr">version</span>=<span class="string">"6.0.0.0"</span> <span class="attr">processorArchitecture</span>=<span class="string">"*"</span> <span class="attr">publicKeyToken</span>=<span class="string">"6595b64144ccf1df"</span> <span class="attr">language</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependentAssembly</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">xmlns</span>=<span class="string">"urn:schemas-microsoft-com:asm.v3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">windowsSettings</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dpiAwareness</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/SMI/2016/WindowsSettings"</span>&gt;</span>PerMonitorV2, PerMonitor<span class="tag">&lt;/<span class="name">dpiAwareness</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dpiAware</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/SMI/2005/WindowsSettings"</span>&gt;</span>True<span class="tag">&lt;/<span class="name">dpiAware</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">windowsSettings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">assembly</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>下载rsrc工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI\go\src\ThorGui&gt;go get github.com/akavel/rsrc</span><br><span class="line">go: downloading github.com/akavel/rsrc v0.9.0</span><br><span class="line">go: github.com/akavel/rsrc upgrade =&gt; v0.9.0</span><br></pre></td></tr></table></figure>

<p>生成.syso文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI\go\src\ThorGui&gt;rsrc -manifest thorgui.manifest -o thorgui.syso</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UI\go\src\ThorGui&gt;go build -ldflags=<span class="string">"-H windowsgui"</span>  <span class="comment">#生成exe文件</span></span><br></pre></td></tr></table></figure>

<h2 id="运行结果测试"><a href="#运行结果测试" class="headerlink" title="运行结果测试"></a>运行结果测试</h2><img src="/img/WechatIMG9.png">




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/11/02/Ubuntu-16-4-%E5%AE%89%E8%A3%85psycopg2-%E6%8A%A5%E9%94%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/02/Ubuntu-16-4-%E5%AE%89%E8%A3%85psycopg2-%E6%8A%A5%E9%94%99/" class="post-title-link" itemprop="url"> Ubuntu 16.4 安装psycopg2 报错 </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-02 14:24:45 / 修改时间：14:28:10" itemprop="dateCreated datePublished" datetime="2020-11-02T14:24:45+08:00">2020-11-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2020/11/02/Ubuntu-16-4-%E5%AE%89%E8%A3%85psycopg2-%E6%8A%A5%E9%94%99/" class="post-meta-item leancloud_visitors" data-flag-title=" Ubuntu 16.4 安装psycopg2 报错 " title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/11/02/Ubuntu-16-4-%E5%AE%89%E8%A3%85psycopg2-%E6%8A%A5%E9%94%99/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/11/02/Ubuntu-16-4-%E5%AE%89%E8%A3%85psycopg2-%E6%8A%A5%E9%94%99/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考报错提示，安装libpg-dev</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(tweb_env) root@Thortest:~<span class="comment"># pip install psycopg2</span></span><br><span class="line">Looking <span class="keyword">in</span> indexes: http://mirrors.cloud.aliyuncs.com/pypi/simple/</span><br><span class="line">Collecting psycopg2</span><br><span class="line">  Downloading http://mirrors.cloud.aliyuncs.com/pypi/packages/fd/ae/98cb7a0cbb1d748ee547b058b14604bd0e9bf285a8e0cc5d148f8a8a952e/psycopg2-2.8.6.tar.gz (383 kB)</span><br><span class="line">     |████████████████████████████████| 383 kB 14.5 MB/s </span><br><span class="line">    ERROR: Command errored out with <span class="built_in">exit</span> status 1:</span><br><span class="line">     <span class="built_in">command</span>: /root/tweb_env/bin/python -c <span class="string">'import sys, setuptools, tokenize; sys.argv[0] = '</span><span class="string">"'"</span><span class="string">'/tmp/pip-install-t1d0xq5b/psycopg2/setup.py'</span><span class="string">"'"</span><span class="string">'; __file__='</span><span class="string">"'"</span><span class="string">'/tmp/pip-install-t1d0xq5b/psycopg2/setup.py'</span><span class="string">"'"</span><span class="string">';f=getattr(tokenize, '</span><span class="string">"'"</span><span class="string">'open'</span><span class="string">"'"</span><span class="string">', open)(__file__);code=f.read().replace('</span><span class="string">"'"</span><span class="string">'\r\n'</span><span class="string">"'"</span><span class="string">', '</span><span class="string">"'"</span><span class="string">'\n'</span><span class="string">"'"</span><span class="string">');f.close();exec(compile(code, __file__, '</span><span class="string">"'"</span><span class="string">'exec'</span><span class="string">"'"</span><span class="string">'))'</span> egg_info --egg-base /tmp/pip-pip-egg-info-6rwptxzr</span><br><span class="line">         cwd: /tmp/pip-install-t1d0xq5b/psycopg2/</span><br><span class="line">    Complete output (7 lines):</span><br><span class="line">    running egg_info</span><br><span class="line">    creating /tmp/pip-pip-egg-info-6rwptxzr/psycopg2.egg-info</span><br><span class="line">    writing /tmp/pip-pip-egg-info-6rwptxzr/psycopg2.egg-info/PKG-INFO</span><br><span class="line">    writing dependency_links to /tmp/pip-pip-egg-info-6rwptxzr/psycopg2.egg-info/dependency_links.txt</span><br><span class="line">    writing top-level names to /tmp/pip-pip-egg-info-6rwptxzr/psycopg2.egg-info/top_level.txt</span><br><span class="line">    writing manifest file <span class="string">'/tmp/pip-pip-egg-info-6rwptxzr/psycopg2.egg-info/SOURCES.txt'</span></span><br><span class="line">    Error: b<span class="string">'You need to install postgresql-server-dev-X.Y for building a server-side extension or libpq-dev for building a client-side application.\n'</span></span><br><span class="line">    ----------------------------------------</span><br><span class="line">ERROR: Command errored out with <span class="built_in">exit</span> status 1: python setup.py egg_info Check the logs <span class="keyword">for</span> full <span class="built_in">command</span> output.</span><br></pre></td></tr></table></figure>

<p>解决方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">(tweb_env) root@Thortest:~<span class="comment"># sudo apt-get install libpq-dev # 安装依赖环境</span></span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree       </span><br><span class="line">Reading state information... Done</span><br><span class="line">Suggested packages:</span><br><span class="line">  postgresql-doc-10</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  libpq-dev</span><br><span class="line">0 upgraded, 1 newly installed, 0 to remove and 50 not upgraded.</span><br><span class="line">Need to get 218 kB of archives.</span><br><span class="line">After this operation, 1,096 kB of additional disk space will be used.</span><br><span class="line">Get:1 http://mirrors.cloud.aliyuncs.com/ubuntu bionic-updates/main amd64 libpq-dev amd64 10.14-0ubuntu0.18.04.1 [218 kB]</span><br><span class="line">Fetched 218 kB <span class="keyword">in</span> 0s (3,547 kB/s) </span><br><span class="line">Selecting previously unselected package libpq-dev.</span><br><span class="line">(Reading database ... 135928 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../libpq-dev_10.14-0ubuntu0.18.04.1_amd64.deb ...</span><br><span class="line">Unpacking libpq-dev (10.14-0ubuntu0.18.04.1) ...</span><br><span class="line">Setting up libpq-dev (10.14-0ubuntu0.18.04.1) ...</span><br><span class="line">Processing triggers <span class="keyword">for</span> man-db (2.8.3-2ubuntu0.1) ...</span><br><span class="line">(tweb_env) root@Thortest:~<span class="comment"># pip install psycopg2       # 再次安装     </span></span><br><span class="line">Looking <span class="keyword">in</span> indexes: http://mirrors.cloud.aliyuncs.com/pypi/simple/</span><br><span class="line">Collecting psycopg2</span><br><span class="line">  Downloading http://mirrors.cloud.aliyuncs.com/pypi/packages/fd/ae/98cb7a0cbb1d748ee547b058b14604bd0e9bf285a8e0cc5d148f8a8a952e/psycopg2-2.8.6.tar.gz (383 kB)</span><br><span class="line">     |████████████████████████████████| 383 kB 28.8 MB/s </span><br><span class="line">Building wheels <span class="keyword">for</span> collected packages: psycopg2</span><br><span class="line">  Building wheel <span class="keyword">for</span> psycopg2 (setup.py) ... <span class="keyword">done</span></span><br><span class="line">  Created wheel <span class="keyword">for</span> psycopg2: filename=psycopg2-2.8.6-cp36-cp36m-linux_x86_64.whl size=420359 sha256=e4038d16f61c8bb594aae8dfc8552bb5adc1d2c08b9b5569d65713ede01a489e</span><br><span class="line">  Stored <span class="keyword">in</span> directory: /root/.cache/pip/wheels/ba/11/64/92ac0a2b09f4e201ec7578bab7d35f3dbd3e07795ee1e18319</span><br><span class="line">Successfully built psycopg2</span><br><span class="line">Installing collected packages: psycopg2</span><br><span class="line">Successfully installed psycopg2-2.8.6</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/10/29/django-drf-nginx-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/29/django-drf-nginx-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">django drf nginx vue 跨域问题彻底解决方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-29 10:41:00" itemprop="dateCreated datePublished" datetime="2020-10-29T10:41:00+08:00">2020-10-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-04 17:06:29" itemprop="dateModified" datetime="2020-11-04T17:06:29+08:00">2020-11-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
                </span>
            </span>

          
            <span id="/2020/10/29/django-drf-nginx-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" class="post-meta-item leancloud_visitors" data-flag-title="django drf nginx vue 跨域问题彻底解决方法" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/29/django-drf-nginx-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/29/django-drf-nginx-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>跨域，跨域，跨域。重要的事说三遍，为啥以前解决方法不对呢？以前有测试域名，直接绑定好并且配置django-cors-headers即可。今天遇到情况是部署好django后，什么设置都了还是提示跨域问题！</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>本地开发环境 vue.js  url:<a href="http://localhost:8000" target="_blank" rel="noopener">http://localhost:8000</a>   服务器在阿里与，ip:端口模式。解析了域名就不会提示，还有一个问题换搜狗浏览器也可以访问，chrome不行。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Access</span> <span class="keyword">to</span> XMLHttpRequest at <span class="string">'http://39.99.35.80/api/v1/chain/stats'</span> <span class="keyword">from</span> origin <span class="string">'http://localhost:8000'</span> has been blocked <span class="keyword">by</span> CORS <span class="keyword">policy</span>: <span class="keyword">No</span> <span class="string">'Access-Control-Allow-Origin'</span> <span class="keyword">header</span> <span class="keyword">is</span> present <span class="keyword">on</span> the requested resource</span><br></pre></td></tr></table></figure>

<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>前期按照以前配置的django，直接使用<code>python manage.py runserver 0.0.0.0:80</code> 没问题。使用nginx代理后就会出现问题。</p>
<p>崩溃中！！！！于是各种找问题。</p>
<h3 id="1-django配置"><a href="#1-django配置" class="headerlink" title="1.django配置"></a>1.django配置</h3><p>安装cors模块,切记，切记，要安装2.x版本 <a href="https://github.com/adamchainz/django-cors-headers/issues/579" target="_blank" rel="noopener">https://github.com/adamchainz/django-cors-headers/issues/579</a></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-cors-headers== <span class="number">2.5</span><span class="number">.3</span> # <span class="number">3.0</span>版本+nginx要踩坑</span><br></pre></td></tr></table></figure>

<p>配置settings.py</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span>    <span class="meta"># 指明在跨域访问中，后端是否支持对cookie的操作。</span></span><br><span class="line">CORS_ORIGIN_ALLOW_ALL = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">CORS_ORIGIN_WHITELIST = (</span><br><span class="line">    <span class="string">'*'</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">CORS_ALLOW_METHODS = (</span><br><span class="line">    <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="string">'GET'</span>,</span><br><span class="line">    <span class="string">'OPTIONS'</span>,</span><br><span class="line">    <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="string">'POST'</span>,</span><br><span class="line">    <span class="string">'PUT'</span>,</span><br><span class="line">    <span class="string">'VIEW'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">CORS_ALLOW_HEADERS = (</span><br><span class="line">    <span class="string">'XMLHttpRequest'</span>,</span><br><span class="line">    <span class="string">'X_FILENAME'</span>,</span><br><span class="line">    <span class="string">'accept-encoding'</span>,</span><br><span class="line">    <span class="string">'authorization'</span>,</span><br><span class="line">    <span class="string">'content-type'</span>,</span><br><span class="line">    <span class="string">'dnt'</span>,</span><br><span class="line">    <span class="string">'origin'</span>,</span><br><span class="line">    <span class="string">'user-agent'</span>,</span><br><span class="line">    <span class="string">'x-csrftoken'</span>,</span><br><span class="line">    <span class="string">'x-requested-with'</span>,</span><br><span class="line">    <span class="string">'Pragma'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">	.......</span><br><span class="line">    <span class="string">'corsheaders'</span>,</span><br><span class="line"></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">'corsheaders.middleware.CorsMiddleware'</span>,  <span class="meta"># 最好放第一行</span></span><br><span class="line">    <span class="string">'django.middleware.security.SecurityMiddleware'</span>,</span><br><span class="line">    <span class="string">'django.contrib.sessions.middleware.SessionMiddleware'</span>,</span><br><span class="line">    <span class="string">'django.middleware.common.CommonMiddleware'</span>,</span><br><span class="line">    <span class="string">'django.middleware.csrf.CsrfViewMiddleware'</span>,</span><br><span class="line">    <span class="string">'corsheaders.middleware.CorsPostCsrfMiddleware'</span>, <span class="meta"># 如果出现csrf，加这个</span></span><br><span class="line">    <span class="string">'django.contrib.auth.middleware.AuthenticationMiddleware'</span>,</span><br><span class="line">    <span class="string">'django.contrib.messages.middleware.MessageMiddleware'</span>,</span><br><span class="line">    <span class="string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>





<h3 id="2-nginx配置"><a href="#2-nginx配置" class="headerlink" title="2.nginx配置"></a>2.nginx配置</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">      <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">      <span class="attribute">server_name</span>  x.x.x.x;</span><br><span class="line">      <span class="attribute">keepalive_timeout</span>  <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="attribute">location</span> / &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attribute">client_max_body_size</span> <span class="number">100m</span>;</span><br><span class="line">          <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://127.0.0.1:8000;</span><br><span class="line">          <span class="attribute">proxy_connect_timeout</span> <span class="number">300s</span>;</span><br><span class="line">          <span class="attribute">proxy_read_timeout</span> <span class="number">300s</span>;</span><br><span class="line">        </span><br><span class="line">          <span class="attribute">proxy_buffer_size</span> <span class="number">1024k</span>;  </span><br><span class="line">          <span class="attribute">proxy_buffers</span>   <span class="number">4</span> <span class="number">1024k</span>;  </span><br><span class="line">          <span class="attribute">proxy_busy_buffers_size</span> <span class="number">1024k</span>;  </span><br><span class="line">          <span class="attribute">proxy_temp_file_write_size</span> <span class="number">1024k</span>;  </span><br><span class="line">         </span><br><span class="line">        </span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/adamchainz/django-cors-headers" target="_blank" rel="noopener">https://github.com/adamchainz/django-cors-headers</a></li>
<li><a href="https://www.cnblogs.com/super-ldc/p/12890581.html" target="_blank" rel="noopener">https://www.cnblogs.com/super-ldc/p/12890581.html</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/10/28/Ubuntu-18-4-%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2Django%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/28/Ubuntu-18-4-%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2Django%E9%A1%B9%E7%9B%AE/" class="post-title-link" itemprop="url">Ubuntu 18.4 使用 gunicorn 部署Django项目</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-28 13:11:14 / 修改时间：13:51:14" itemprop="dateCreated datePublished" datetime="2020-10-28T13:11:14+08:00">2020-10-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
                </span>
            </span>

          
            <span id="/2020/10/28/Ubuntu-18-4-%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2Django%E9%A1%B9%E7%9B%AE/" class="post-meta-item leancloud_visitors" data-flag-title="Ubuntu 18.4 使用 gunicorn 部署Django项目" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/28/Ubuntu-18-4-%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2Django%E9%A1%B9%E7%9B%AE/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/28/Ubuntu-18-4-%E7%BA%BF%E4%B8%8A%E9%83%A8%E7%BD%B2Django%E9%A1%B9%E7%9B%AE/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="部署环境"><a href="#部署环境" class="headerlink" title="部署环境"></a>部署环境</h2><ul>
<li>Ubuntu 18.04.5 LTS</li>
<li>Python 3.6.9</li>
<li>Django .2.14</li>
<li>nginx 1.14.0</li>
<li>gunicorn 20.0.4</li>
</ul>
<h2 id="1-创建虚拟环境"><a href="#1-创建虚拟环境" class="headerlink" title="1.创建虚拟环境"></a>1.创建虚拟环境</h2><p>在root目录下创建虚拟环境，在线上部署建议专门在/下建立一个虚拟环境的目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@Thortest:~<span class="comment"># pip3 install virtualenv</span></span><br><span class="line"></span><br><span class="line">root@Thortest:~<span class="comment"># virtualenv tweb_env</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root@Thortest:~<span class="comment"># source tweb_env/bin/activate  # 进入虚拟环境 退出可以使用deactivate 指令</span></span><br><span class="line">(tweb_env) root@Thortest:~<span class="comment"># python</span></span><br><span class="line">Python 3.6.9 (default, Jul 17 2020, 12:50:27) </span><br><span class="line">[GCC 8.4.0] on linux</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">(tweb_env) root@Thortest:~<span class="comment">#  cd /data/Twebpool # 切换到项目路径</span></span><br><span class="line">(tweb_env) root@Thortest:/data/Twebpool<span class="comment"># pip install -r requirements.txt 在当前虚拟环境中安装依赖文件</span></span><br></pre></td></tr></table></figure>


<h2 id="2-编写gunicorn启动脚本"><a href="#2-编写gunicorn启动脚本" class="headerlink" title="2.编写gunicorn启动脚本"></a>2.编写gunicorn启动脚本</h2><p>在项目文件夹下创建gunicorn.sh,此脚本位置与manage.py同一目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">├── db.sqlite3</span><br><span class="line">├── gunicorn.sh</span><br><span class="line">├── logs</span><br><span class="line">│   ├── gunicorn.info.log</span><br><span class="line">│   └── web.log</span><br><span class="line">├── manage.py</span><br><span class="line">├── pool</span><br></pre></td></tr></table></figure>


<p>gunicorn.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line">TIMEOUT=300   <span class="comment">#to solve upload app package timeout issue</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Twebpool为项目名，gunicorn路径必须是虚拟环境的绝对路径</span></span><br><span class="line"><span class="built_in">exec</span> /root/tweb_env/bin/gunicorn Twebpool.wsgi:application -w 6 \</span><br><span class="line">        -b 0.0.0.0:8000 \</span><br><span class="line">        --max-requests 10000 \</span><br><span class="line">        --timeout=300 \</span><br><span class="line">        --access-logfile=server.access.log \</span><br><span class="line">        --error-logfile=server.error.log</span><br></pre></td></tr></table></figure>

<p>设置可执行权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@Thortest:/data/Twebpool<span class="comment"># chmod +x gunicorn.sh</span></span><br></pre></td></tr></table></figure>

<h2 id="3-创建supervisor配置"><a href="#3-创建supervisor配置" class="headerlink" title="3.创建supervisor配置"></a>3.创建supervisor配置</h2><p>安装supervisor并创建配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@Thortest:/data/Twebpool<span class="comment"># apt-get install supervisor</span></span><br><span class="line">root@Thortest:/data/Twebpool<span class="comment"># vim /etc/supervisor/conf.d/web.conf</span></span><br><span class="line">[program:web]</span><br><span class="line">directory=/data/Twebpool/</span><br><span class="line"><span class="built_in">command</span>=/bin/sh gunicorn.sh</span><br><span class="line">stopsignal=QUIT</span><br><span class="line">autostart=<span class="literal">true</span></span><br><span class="line">autorestart=<span class="literal">true</span></span><br><span class="line">stdout_logfile=/data/Twebpool/logs/gunicorn.info.log</span><br><span class="line">stderr_logfile=/data/Twebpool/logs/gunicorn.error.log</span><br><span class="line">redirect_stderr=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>启动项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@Thortest:/data/Twebpool<span class="comment"># supervisorctl </span></span><br><span class="line">supervisor&gt; reread</span><br><span class="line">supervisor&gt; update   <span class="comment"># 默认会直接启动，如果需要停止使用stop|start｜restart</span></span><br><span class="line">supervisor&gt; status</span><br><span class="line">web                              RUNNING   pid 305, uptime 0:0:47</span><br><span class="line">supervisor&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-配置nginx"><a href="#4-配置nginx" class="headerlink" title="4.配置nginx"></a>4.配置nginx</h2><p>x.x.x.x 为服务器域名或者外网ip</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">(tweb_env) root@Thortest:~<span class="comment"># vim /etc/nginx/conf.d/api.conf </span></span><br><span class="line">  server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  x.x.x.x;</span><br><span class="line">        keepalive_timeout  300;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            client_max_body_size 100m;</span><br><span class="line">            proxy_http_version 1.1;</span><br><span class="line">            proxy_pass http://127.0.0.1:8000;</span><br><span class="line">            proxy_connect_timeout 300s;</span><br><span class="line">            proxy_read_timeout 300s;</span><br><span class="line">            proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">            proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">            proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">            proxy_send_timeout 15000;</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">            proxy_buffer_size 1024k;  </span><br><span class="line">            proxy_buffers   4 1024k;  </span><br><span class="line">            proxy_busy_buffers_size 1024k;  </span><br><span class="line">            proxy_temp_file_write_size 1024k;  </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>测试nginx配置</p>
<p><font color="red"> ps:nginx -t 测试。习惯很重要，修改配置后一定要使用-t检查下有没有问题</font></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(tweb_env) root@Thortest:~<span class="comment"># nginx -t</span></span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">(tweb_env) root@Thortest:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>重启或者重新加载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(tweb_env) root@Thortest:~<span class="comment"># systemctl  restart nginx.service # reload 不重启服务应用新配置｜ restart 重启</span></span><br></pre></td></tr></table></figure>


<h2 id="5-访问测试"><a href="#5-访问测试" class="headerlink" title="5.访问测试"></a>5.访问测试</h2> <img src="/img/1603864195171.jpg">





      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/10/27/Linux-crontab-%E5%AE%9E%E7%8E%B0%E7%A8%8B%E5%BA%8F%E7%A7%92%E7%BA%A7%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/Linux-crontab-%E5%AE%9E%E7%8E%B0%E7%A8%8B%E5%BA%8F%E7%A7%92%E7%BA%A7%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C/" class="post-title-link" itemprop="url">Linux crontab 实现程序秒级定时执行</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-27 23:49:31 / 修改时间：23:56:46" itemprop="dateCreated datePublished" datetime="2020-10-27T23:49:31+08:00">2020-10-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2020/10/27/Linux-crontab-%E5%AE%9E%E7%8E%B0%E7%A8%8B%E5%BA%8F%E7%A7%92%E7%BA%A7%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C/" class="post-meta-item leancloud_visitors" data-flag-title="Linux crontab 实现程序秒级定时执行" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/27/Linux-crontab-%E5%AE%9E%E7%8E%B0%E7%A8%8B%E5%BA%8F%E7%A7%92%E7%BA%A7%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/27/Linux-crontab-%E5%AE%9E%E7%8E%B0%E7%A8%8B%E5%BA%8F%E7%A7%92%E7%BA%A7%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="crontab-秒级执行"><a href="#crontab-秒级执行" class="headerlink" title="crontab 秒级执行"></a>crontab 秒级执行</h2><p>1.将执行命令写入脚本中</p>
<p>run.sh</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash  </span></span><br><span class="line">step=10 <span class="comment">#间隔的秒数，不能大于60  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">for</span> (( i = 0; i &lt; 60; i=(i+step) )); <span class="keyword">do</span>  </span><br><span class="line">                <span class="built_in">cd</span> /data/Twebpool/script &amp;&amp; /root/tweb_env/bin/python  blocks_all.py &gt;&gt;/tmp/blocks.txt <span class="comment"># 执行命令</span></span><br><span class="line">            sleep <span class="variable">$step</span>   <span class="comment">#间隔秒数</span></span><br><span class="line"><span class="keyword">done</span>  </span><br><span class="line">          </span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>
<p>3.设置可执行权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@Thortest:/data/Twebpool/script<span class="comment"># chmod +x run.sh</span></span><br></pre></td></tr></table></figure>

<p>2.设置crontab</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*  *  *  *  *   /data/Twebpool/script/run.sh</span><br></pre></td></tr></table></figure>


<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p><font color="read"><strong>每秒钟执行一次脚本程序，脚本中设置间隔多少秒重复执行，即可实现秒级别效果</strong></font></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.roddypy.com/2020/10/27/django-drf-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E9%BB%98%E8%AE%A4%E4%B8%BAjson%E8%BE%93%E5%87%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Roddy">
      <meta itemprop="description" content="认认真真做事，踏踏实实做人">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="普拉多VX">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/django-drf-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E9%BB%98%E8%AE%A4%E4%B8%BAjson%E8%BE%93%E5%87%BA/" class="post-title-link" itemprop="url">django drf 在浏览器中默认为json格式输出</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-27 22:18:16 / 修改时间：22:26:19" itemprop="dateCreated datePublished" datetime="2020-10-27T22:18:16+08:00">2020-10-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a>
                </span>
            </span>

          
            <span id="/2020/10/27/django-drf-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E9%BB%98%E8%AE%A4%E4%B8%BAjson%E8%BE%93%E5%87%BA/" class="post-meta-item leancloud_visitors" data-flag-title="django drf 在浏览器中默认为json格式输出" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/10/27/django-drf-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E9%BB%98%E8%AE%A4%E4%B8%BAjson%E8%BE%93%E5%87%BA/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/10/27/django-drf-%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E9%BB%98%E8%AE%A4%E4%B8%BAjson%E8%BE%93%E5%87%BA/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>在浏览器中访问drf 的url，默认打开是html格式的页面。因没有获取静态资源，现在部署后是这样的格式。<br><img src="/img/1603808205660.jpg"></p>
<p>那么如何才能默认展示为json呢？</p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>在<code>settings.py</code>文件中添加如下配置即可</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_PARSER_CLASSES'</span>: (</span><br><span class="line">        <span class="string">'rest_framework.parsers.JSONParser'</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">'DEFAULT_RENDERER_CLASSES'</span>: (</span><br><span class="line">        <span class="string">'rest_framework.renderers.JSONRenderer'</span>,</span><br><span class="line">      </span><br><span class="line">    ),</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>重启项目</p>
<img src="/img/1603808718567.jpg">

<p>是我想要的结果</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://stackoverflow.com/questions/45498989/django-rest-framework-output-in-json-to-the-browser-by-default" target="_blank" rel="noopener">https://stackoverflow.com/questions/45498989/django-rest-framework-output-in-json-to-the-browser-by-default</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }


</script>

<script data-ad-client="ca-pub-5376615838885840" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Roddy</p>
  <div class="site-description" itemprop="description">认认真真做事，踏踏实实做人</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">90</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/langubtc" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;langubtc" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:923401910@qq.com" title="E-Mail → mailto:923401910@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友链
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.liwenzhou.com/" title="https:&#x2F;&#x2F;www.liwenzhou.com" rel="noopener" target="_blank">李文周</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.rainbowei.com/" title="http:&#x2F;&#x2F;www.rainbowei.com" rel="noopener" target="_blank">孙科伟</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://xiaorui.cc/" title="http:&#x2F;&#x2F;xiaorui.cc" rel="noopener" target="_blank">丙峰云</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.simlinux.com/" title="http:&#x2F;&#x2F;www.simlinux.com" rel="noopener" target="_blank">Geekwolf</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://ttxsgoto.github.io/" title="https:&#x2F;&#x2F;ttxsgoto.github.io" rel="noopener" target="_blank">钟强博客</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>
  <script data-ad-client="ca-pub-5376615838885840" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Roddy</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?547d989a7055abbbc8faf5fc9e5fb90a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'OkYu0hJfOxyBXYDjgnYWA3m2-gzGzoHsz',
      appKey     : 'z3bkXuLWL3R5uos7A5zbBsUV',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
